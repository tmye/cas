{% extends 'base.html.twig' %}

{% block title %}C.A.S - Jours nuls{% endblock %}

{% block body %}
<div class="container-fluid">
    <div class="wrapper">

        {% include('cas/partials/_sidebar.html.twig') %}

        <div class="content-page">
            <div class="content">
                <div class="col-lg-12"><h2 class="h5_title page-title"><span class="uil-calendar-alt"></span> Gestion des jours perdus</h2></div>
                <div class="row card">
                    <div class="col-lg-12 card-body">
                        <p class="description_message">Ajoutez ou modifiez un jour non travaillé</p>
                        <div class="row">
                            <div class="col-lg-12">
                                <ul class="collapsible" data-collapsible="accordion">
                                    <li>
                                        <div class="collapsible-header active collapsible-header-title">
                                            <h3>Définissez un jour null</h3>
                                        </div>
                                        <div class="collapsible-body" style="padding-bottom: 0px">
                                            {% for message in  app.session.flashbag.get('notice') %}
                                                <div class="row">
                                                    <div class="col-lg-12">
                                                        <div class="operation_message">
                                                            {{ message }}
                                                        </div>
                                                    </div>
                                                </div>
                                            {% endfor %}
                                            <div class="row">
                                                <div class="col-lg-12">
                                                    Les jours nuls sont des jours qui ont été perdus dû à des coupures de courants et les jours fériés.
                                                </div>
                                            </div>
                                            <div class="row">
                                                <div class="col-lg-12">
                                                    {%  if message is defined and message is not null %}
                                                        <div class="operation_message">
                                                            {{ message }}
                                                        </div>
                                                    {% endif %}
                                                </div>
                                            </div>
                                            <div class="col-lg-12">
                                                {{ form_start(form) }}
                                                <div class="col-lg-12">
                                                    {{ form_row(form.jour, {'attr': {'type':'date', 'class': 'form-control datepicker'}, 'type':'date' }) }}
                                                </div>
                                                <div class="col-lg-12">
                                                    {{ form_row(form.motif, {'attr': {'class': 'mb-2 form-control input-customized','placeholder':'Motif de la nullité'}}) }}
                                                </div>
                                                <div class="col-lg-12">
                                                    {{ form_widget(form.Ajouter, { 'label': 'Ajouter','attr': {'class':'mt-2 btn btn-lg btn-success'} }) }}

                                                    {{ form_rest(form) }}
                                                </div>
                                                {{ form_end(form) }}
                                            </div>
                                        </div>
                                    </li>
                                </ul>
                            </div>
                        </div>
                        <h5 class="h5_title page-title">Liste des jours perdus</h5>
                        <div class="row">
                            <div class="col-lg-12">
                                <ul class="collapsible" data-collapsible="accordion">
                                    <li>
                                        <div class="collapsible-header active collapsible-header-title">Liste des jours nuls</div>
                                        <div class="collapsible-body" style="padding-bottom: 0px">
                                            <div class="row">
                                                <div class="col-lg-12">
                                                    <table class="table table-striped highlight">
                                                        <thead>
                                                            <tr>
                                                                <th>Jour</th>
                                                                <th>Motif</th>
                                                                <th>Actions</th>
                                                            </tr>
                                                        </thead>
                                                        <tbody>
                                                            {% for jour in listJourNull %}
                                                                <tr>
                                                                    <td>{{ jour.jour }}</td>
                                                                    <td>{{ jour.motif }}</td>
                                                                    <td>
                                                                        <a href="{{ path('editNullDate',{'id':jour.id}) }}">
                                                                            <button class="simple-button-decoration btn btn-primary blue white-text">
                                                                                <span class="uil-edit"></span>
                                                                                Modifier
                                                                            </button>
                                                                        </a>
                                                                        <button class="simple-button-decoration btn btn-danger red white-text deleteND" identify="{{ path('deleteNullDate',{'id':jour.id}) }}">
                                                                            <span class="uil-times"></span>
                                                                            Supprimer
                                                                        </button>
                                                                    </td>
                                                                </tr>
                                                            {% endfor %}
                                                        </tbody>
                                                    </table>
                                                </div>
                                            </div>
                                        </div>
                                    </li>
                                </ul>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
{% endblock %}

{% block javascripts %}
    <script>
        $(function(){
            $(".deleteND").click(function(){
                var rep = confirm("Etes-vous sur de vouloir supprimer ce département?");
                var id = this.getAttribute('identify');
                if(rep==true){
                    window.location.href = id;
                }
            });


            $('.datepicker').on('mousedown',function(event){
                event.preventDefault();
            });

        });
    </script>
{% endblock %}

{% block stylesheets %}
{% endblock %}
